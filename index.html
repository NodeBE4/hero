---
layout: default
---


<script src="{{ site.baseurl }}/assets/js/hero.js"></script>

<div id="news">
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>
</div>

<!-- <h1>英雄榜</h1>
 --><!-- <table id="example" class="table table-striped table-bordered" style="width:100%;font-size:12px;"> -->
<table id="example" class="table table-striped table-bordered table-sm" style="width:100%;">

</table>
<hr>
<div class="row">
  <div class="col-12 col-md-6">
    <h4>请在此处键入你心中的英雄</h4>
    <span style="color: #3498DB;width:100%; font-size:14px">HeroBot會搞定剩下的一切...</span>
    <p style="color: #566573;font-size: 12px;">提示：提交或投票成功或需approve批准no script弹出的警告。</p>
    <form id="add-hero-form" action="https://hero-form.vercel.app/api/submit" method="post" target="_blank">
      <div class="form-group">
          <input name="name" type="text" placeholder="姓名 如:李文亮、陈玫" style="display:table-cell; width:100%; max-width: 600px;">
          <input name="keyword" type="text" placeholder="最关键词 (以区分同名同姓者) 如:医生、端点星" style="display:table-cell; width:100%; max-width: 600px;">
          <input name="url" type="url" placeholder="维基百科链接 https://zh.wikipedia.org/..." style="display:table-cell; width:100%; max-width: 600px;"><br>
        <textarea name="message" style="width: 100%; max-width: 600px; height: 100px;" placeholder="随便说点什么，HeroBot看不见但人类能看到..."></textarea>
        <div><input type="submit" value="提交"/></div>
      </div>
    </form>
    <div>
      <p style="color: #803030;">在此<i>提交新人物</i>或<i>点赞</i>无需注册或登录，本站亦无法获得你的IP地址或浏览器指纹等隐私信息。</p>
      <p style="font-size: 12px;">API开放<a href="https://github.com/NodeBE4/hero-form">源代码</a>，且实际部署的代码经第三方API托管平台<a href="https://vercel.com">vercel</a>验证(见最新<a href="https://github.com/NodeBE4/hero-form/commits/master">commit</a>下的vercel bot留言).</p>
    </div>
  </div>
  <div class="col-12 col-md-6">
    <h4>HeroBot说</h4>
    <div id="bot-message" class="overflow-auto">
      <p style="color: #3498DB;"><i>"赞不会立即生效，每小时或創建新人物時更新一次"</i></p>      
      <p style="color: #3498DB;"><i>"头像会有的"</i></p>      
      <p style="color: #3498DB;"><i>"沒有js的世界是殘缺的"</i></p>      
      <p><i style="color: blue">"英雄榜v1.0发布!"</i></p>
    </div>
    <h4>说明</h4>
    <div id="explain">
      <p>HeroBot根据用户提交信息，自动从<a href="https://zh.wikipedia.org/">维基百科</a>、<a href="https://www.google.com">Google</a>和本站数据库中搜集人物的基本信息、影响力、观点以及过去15天的新聞。人物影响力<a href="https://nodebe4.github.io/hero/index.json">数据</a>的说明在<a href="https://github.com/NodeBE4/hero/">这里</a></p>
      <p><b>如何參與</b>：參考本項目的相關<a href="https://2047.name/t/7158">討論</a>，目標是匿名互動，能點贊、評論，歡迎有才華的您貢獻您的想法、代碼、或藝術設計。<i style="color: #FF445D">如果你是網站站長，可以host本站的鏡像，具體方法即將出爐...</i></p>
      <p>旧版demo在<a href="{{ site.baseurl }}/demo">这里</a></p>
    </div>
  </div>
</div>
{% include simple-search.html %}

<div style="display:none">
 <form id="vote-form" action="https://hero-form.vercel.app/api/vote" method="post" onsubmit=";return false" target="_blank">
    <div class="form-group">
        <input id="input-hash" name="hash" type="text" style="display:table-cell; width:100%; max-width: 600px;">
      <div><input type="submit" value="提交"/></div>
    </div>
  </form>
</div>

<script type="text/javascript" >
// $(document).ready(function() {
//     $('#example').DataTable();
// } );

document.addEventListener("DOMContentLoaded", function(event){
  var url = "{{ site.baseurl }}/index.json";
  var id = "example";
  const thead_format = {
    'vote': '<i style="color:#2980B9" class="fa fa-thumbs-up"></i>',
  	'people': '<span><b>人物</b></span>',
  	'google': '<i class="fa fa-google google" title="Google"></i>',
  	'twitter': '<i class="fa fa-twitter twitter" title="Twitter"></i>',
  	'ytb': '<i class="fa fa-youtube youtube" title="YouTube"></i>',
  	'reddit': '<i class="fa fa-reddit reddit" title="reddit.com"></i>',
  	'matters': '<i class="fa fa-m" title="matters.news"></i>',
  }
  $.getJSON(url, function(json) {
    herolist = json;

  	var table = document.getElementById(id);
  	var thead = document.createElement('thead');
  	var tbody = document.createElement('tbody');
  	var tfoot = document.createElement('tfoot');
  	table.appendChild(thead)
  	table.appendChild(tbody)
  	table.appendChild(tfoot)
  	var tr0 = document.createElement('tr');
  	thead.appendChild(tr0);
  	var thead_vals = Object.values(thead_format)
  	var thead_keys = Object.keys(thead_format)
  	thead_vals.map(item => {
  		var th = document.createElement('th')
  		th.innerHTML = item
  		tr0.appendChild(th)
  	});

    var lis = herolist.map(item => {
      let tr = document.createElement('tr');
      tbody.appendChild(tr)
      thead_keys.map(key => {
        let td1 = document.createElement('td');
        if (key == 'people'){
          if (item['photo']){
            td1.innerHTML += `<a class="thumb-post"><img src="${item['photo']}" ></img></a>`
          }else{
            td1.innerHTML += `<a class="thumb-post"><img src="{{ site.baseurl }}/assets/images/avatar.png" ></img></a>`            
          }
    	    td1.innerHTML += `<a href="{{ site.baseurl }}/${item[key]}"><b>${item[key]}</b></a>`;
          if (item['keyword']!==""){
            td1.innerHTML += `<i style="font-size:0.8em">   (${item['keyword']})</i>`;
          }
    	  }else if(key=='vote'){
          let val = item[key] || 0
          td1.innerHTML += val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
          td1.innerHTML += `<a id="vote-${item.hash}" onclick="vote_hero('${item.hash}')" style="color:#2980B9"> <i class="fa fa-thumbs-o-up"></i></a>`
          td1.id = "vote-cnt-"+item.hash
        }else{
          let val = item[key] || 0
    	  	td1.innerHTML = `<i style="font-size: 12px;">${val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")}</i>`
    	  }
        tr.appendChild(td1);
      });
    });

  	var tr2 = document.createElement('tr');
  	tfoot.appendChild(tr2);
  	thead_vals.map(item => {
  		var th = document.createElement('th')
      th.setAttribute("data-field", item)
      th.innerHTML = item
  		tr2.appendChild(th)
  	});
  	$('#example').DataTable( {
        "order": [[ 2, "desc" ]],
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.10.21/i18n/Chinese.json"
        }
    });
    console.log(table)
  })
});

var voteform = document.getElementById("vote-form");
function handleForm(event) { event.preventDefault(); } 
voteform.addEventListener('submit', handleForm);

</script>