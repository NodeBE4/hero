---
layout: default
---

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">

<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>

<script src="{{ site.baseurl }}/assets/js/hero.js"></script>

<div id="news">
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>
</div>

<h1>英雄榜</h1>
<table id="example" class="table table-striped table-bordered" data-toggle="table" data-sort-name="Google" data-sort-order="desc" style="width:100%;font-size:12px;">

</table>

<div class="row">
  <div class="col-12 col-md-6">
    <h4>请在此处键入你心中的英雄</h4>
    <form action="https://hero-form.vercel.app/api/submit" method="post">
      <div class="form-group">
          <input name="name" type="text" placeholder="全名 如:李文亮" style="display:table-cell; width:100%; max-width: 600px;">
          <input name="keyword" type="text" placeholder="最关键词 (职业、案子等用以区分重名者) 如:医生、端点星" style="display:table-cell; width:100%; max-width: 600px;">
          <input name="url" type="url" placeholder="维基百科链接 https://zh.wikipedia.org/..." style="display:table-cell; width:100%; max-width: 600px;"><br>
        <textarea name="message" style="width: 100%; max-width: 600px; height: 100px;" placeholder="随便说点什么，没什么用..."></textarea>
        <div><input type="submit" value="提交"/></div>
      </div>
    </form>
    <div><p style="color: #3498DB;">你只需填写这个表格，剩下的一切交给hero bot</p><p style="color: #803030;">在此<i>提交新人物</i>或<i>点赞</i>无需注册或登录，本站亦无法获得你的IP地址或浏览器指纹等隐私信息。</p>
      <p>API开放<a href="https://github.com/NodeBE4/hero-form">源代码</a>，且实际部署的代码经第三方API托管平台<a href="https://vercel.com">vercel</a>验证(见最新<a href="https://github.com/NodeBE4/hero-form/commits/master">commit</a>下的vercel bot留言).</p></div>
  </div>
  <div class="col-12 col-md-6">
    <h4>说明</h4>
    <div id="explain">
      <p>本页由js动态生成，目前僅用於功能演示。更多说明见<a href="https://github.com/NodeBE4/hero/">Github</a></p>
      <p>人物列表存放於<a href="https://nodebe4.github.io/hero/index.json">index.json</a></p>
      <p>點擊人物列表中的名字查看由机器人自动生成的詳細介紹与近期相關新聞報道，感谢<a href="https://zh.wikipedia.org/">Wikipedia</a>和<a href="https://www.google.com">Google</a>。</p>
      <p>關於本項目的規劃目標以及更多討論見這裏<a href="https://2047.name/t/7158">這裏</a>。項目最終希望實現匿名互動功能，能對英雄點贊，甚至能留言評論，需要有人幫忙寫API，API計劃部署到<a href="https://vercel.com">vercel</a>(參考<a href="https://github.com/duty-machine/duty-machine/">duty-machine項目</a>), 歡迎大家幫忙寫api網頁前端js, css.</p>
      <p>旧版demo在<a href="{{ site.baseurl }}/demo">这里</a></p>
      <p style="color: #3498DB;">Bot说：<i>"头像会有的"</i></p>
    </div>
  </div>
</div>
{% include simple-search.html %}

<script type="text/javascript" >
// $(document).ready(function() {
//     $('#example').DataTable();
// } );

document.addEventListener("DOMContentLoaded", function(event){
  var url = "{{ site.baseurl }}/index.json";
  var id = "example";
  const thead_format = {
    'vote': '赞',
  	'people': '姓名',
  	'keyword': '区别词',
  	'google': 'Google',
  	'twitter': 'Twitter',
  	'ytb': 'YouTube',
  	'reddit': 'Reddit',
  	'matters': 'Matters',
  }
  $.getJSON(url, function(json) {
    herolist = json;

  	var table = document.getElementById(id);
  	var thead = document.createElement('thead');
  	var tbody = document.createElement('tbody');
  	var tfoot = document.createElement('tfoot');
  	table.appendChild(thead)
  	table.appendChild(tbody)
  	table.appendChild(tfoot)
  	var tr0 = document.createElement('tr');
  	thead.appendChild(tr0);
  	var thead_vals = Object.values(thead_format)
  	var thead_keys = Object.keys(thead_format)
  	thead_vals.map(item => {
  		var th = document.createElement('th')
      th.setAttribute("data-field", item);
  		th.innerText = item
  		tr0.appendChild(th)
  	});

    var lis = herolist.map(item => {
      let tr = document.createElement('tr');
      tbody.appendChild(tr)
      thead_keys.map(key => {
        let td1 = document.createElement('td');
        if (key == 'people'){
  	    td1.innerHTML = `<a href="{{ site.baseurl }}/${item[key]}">${item[key]}</a>`;
  	  }else{
        let val = item[key] || 0
  	  	td1.innerText = val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
        // td1.innerText = item[key] || 0
  	  }
        tr.appendChild(td1);
      });
    });

  	var tr2 = document.createElement('tr');
  	tfoot.appendChild(tr2);
  	thead_vals.map(item => {
  		var th = document.createElement('th')
      th.setAttribute("data-field", item)
  		th.innerText = item
  		tr2.appendChild(th)
  	});
  	$('#example').DataTable();
    console.log(table)
  })
});

</script>